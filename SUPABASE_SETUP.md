# Supabase Setup Guide

To use Supabase with this application, please follow these steps:

## 1. Credentials
Ensure you have set the variables in `.env.local`:
```
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
```

## 2. Database Schema
Run the following SQL in your Supabase SQL Editor to create the necessary tables:

```sql
-- Properties Table
create table if not exists properties (
  id bigint generated by default as identity primary key,
  title text not null,
  type text,
  sale_mode text,
  usage text,
  price numeric,
  area numeric,
  city text,
  locality text,
  lat double precision,
  lng double precision,
  images text[],
  description text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enquiries Table
create table if not exists enquiries (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  name text,
  mobile text,
  email text,
  message text,
  property_id bigint references properties(id)
);

-- Enable RLS (Optional but recommended)
alter table properties enable row level security;
alter table enquiries enable row level security;

-- Policies (Public Read for properties, Public Insert for enquiries)
create policy "Public properties are viewable by everyone" 
  on properties for select 
  using ( true );

create policy "Anyone can insert enquiries" 
  on enquiries for insert 
  with check ( true );
```

## 3. Seed Data
After setting up the tables, you can seed the initial data from `properties.json` by accessing the seed API route:

1. Start the development server: `npm run dev`
2. Visit: `http://localhost:3000/api/seed` in your browser.
3. You should see a success message indicating how many properties were inserted.
